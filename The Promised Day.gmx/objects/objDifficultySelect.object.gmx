<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>select[0] = "New Game";
select[1] = "Load Game";
select[2] = "Options";
selection = 0;
xseperation = 32;
yseperation = 52;
instance_create(128 - xseperation, 352 + (yseperation * selection) + 26,objSelector);

if (file_exists("Data\save"))  //check if current save exists
{
    //load save data
    exists = true;
    
    //load the save map
    var saveMap;
    
    if (global.extraSaveProtection) //use ds_map_secure function
    {
        saveMap = ds_map_secure_load("Data\save");
    }
    else    //use text file
    {
        var f = file_text_open_read("Data\save");
        
        saveMap = ds_map_create();
        ds_map_read(saveMap,base64_decode(file_text_read_string(f)));
        
        file_text_close(f);
    }
    
    if (saveMap != -1)  //check if the save map loaded correctly
    {
        death = ds_map_find_value(saveMap,"death");
        if (is_undefined(death)) //check for undefined value in case the save was messed with or got corrupted
            death = 0;
        
        time = ds_map_find_value(saveMap,"time");
        if (is_undefined(time))
            time = 0;

        difficulty = ds_map_find_value(saveMap,"difficulty");
        if (is_undefined(difficulty))
            difficulty = 0;
        
        for (var j = 0; j &lt; 8; j++)
        {
            boss[j] = ds_map_find_value(saveMap,"saveBossItem["+string(j)+"]");
            if (is_undefined(boss[j]))
                boss[j] = false;
        }
        
        clear = ds_map_find_value(saveMap,"saveGameClear");
        if (is_undefined(clear))
            clear = false;
        
        ds_map_destroy(saveMap);
    }
    else
    {
        //save map didn't load correctly, set the variables to the defaults
        death = 0;
        time = 0;
        difficulty = 0;
        for (var j = 0; j &lt; 8; j++)
        {
            boss[j] = false;
        }
        clear = false;
    }
}
else
{
    exists = false;
    death = 0;
    time = 0;
}

var t = time;

timeStr = string(t div 3600) + ":";
t = t mod 3600;
timeStr += string(t div 600);
t = t mod 600;
timeStr += string(t div 60) + ":";
t = t mod 60;
timeStr += string(t div 10);
t = t mod 10;
timeStr += string(floor(t));

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if scrButtonCheckPressed(global.menuDownButton)
{
    if selection = 2
    {
        selection = 0;
    }
    else
    {
        selection ++;
    }
}
if scrButtonCheckPressed(global.menuUpButton)
{
    if selection = 0
    {
        selection = 2;
    }
    else
    {
        selection --;
    }
}

if scrButtonCheckPressed(global.menuAcceptButton)
{
    if selection = 0
    {
            if file_exists("Data\save")
            {
                file_delete("Data\save");
            }
            global.gameStarted = true; 
            global.autosave = true;            
            global.difficulty = 0;
            if !instance_exists(objFadeTransition)
            {
                instance_create(0,0,objFadeTransition);
            }
            audio_sound_gain(global.currentMusic,0.25,500);
            with objFadeTransition
            {
                roomTo = global.startRoom;      
                
            }                                       
    }
    if selection = 1
    {
        if (file_exists("Data\save"))
        {
            audio_sound_gain(mus1,0.25,500);
            scrLoadGame(true);                                     
        }
    }
    if selection = 2
    {
        room_goto(rOptions);
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>draw_set_halign(fa_left);
draw_set_font(fntMenu);
scrDrawTextOutline(128,352,"New Game",c_black,c_white);
scrDrawTextOutline(128,352 + yseperation,"Load Game",c_black,c_white);
scrDrawTextOutline(128,352 + (yseperation * 2),"Options",c_black,c_white);
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
